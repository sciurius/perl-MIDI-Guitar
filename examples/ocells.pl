#!/usr/bin/perl

# El Cant Dels Ocells by Pau Casals
# https://tabs.ultimate-guitar.com/tab/pau-casals/el-cant-dels-ocells-tabs-1571325

use strict;
use warnings;
use utf8;

use FindBin;
use lib "$FindBin::Bin/../lib";
use MIDI::Guitar;

my $opus = MIDI::Guitar->new( signature => '4/4',
			      tempo     => 70,
			      ticks     => 18*4,
			      midi      => 'ocells.midi' );
sub xp($) {
    my ( $t ) = @_;
    $t =~ s/[-|]$//mg;
    $t =~ s/(.{18})/$1|/g;
    $t =~ s/^/|/mg;
    return $t
}

$opus->tab( 4, xp <<EOD );
-------------------------------------------------------------------------
----------------1-----0------------1-----------3-----------1------2------
----------------2---2-1--------0---2-----0-----2--2--1-----2------0------
--------------0-2-----2--2--3------2--3-----3--0--------3--2---2--2------
-----0--2--3----0-----0------------0-----------------------0------0------
--0----------------------------------------------------------------------
EOD
$opus->tab( 4, xp <<EOD );
-------------------------------------------------------------------------
--------------3------0-----------------------------------1-----2---------
--------------2------0----------0-------------2----1-----2-----0---------
-----0--2--3--0---0--0--3--2--0-2--0----------0----2-----2---2-2---------
--4-----------------------------3-----3--2--3-0--3-2---0-0-----0---------
----------------------------------------------1----0---------------------
EOD
$opus->tab( 4, xp <<EOD );
-----------------------------------------------------------0--5-4-----3--
--------------3-----0--------------------------------0-1-3-1----5-5-6----
----------0---2-----0--------0-----------2----1----2-------2----4--------
----0-2-3---3-0---0-0--3-2-0-2--0--------0----2--2---------2----6--------
--4--------------------------3----3--2-3-0-3--2------------0----0--------
-----------------------------------------1----0--------------------------
EOD
$opus->tab( 4, xp <<EOD );
--0--1--3--1--5--5--------0------------------------3--1--0----0----------
--1-----------6-----9--6--1--5--5--------5--6-6--3-3--------3-1--3--1----
--2-----------7-----------2-----6--6--7-------7----0----------0----------
--2-----------0-----------2-----5-------------7----0----------2----------
--0-----------------------0-----0-------------5---------------3----------
-------------------------------------------------------------------------
EOD
$opus->tab( 4, xp <<EOD );
----------0-----0------------------------3-1-0---0--------------0---5---|
--0-1-3-1-0-----1--5-5------5-6-8-6-6--3-3-----3-1--3-1-0-1-3-1-0---5---|
------2---1---2-2----6--6-7---------7----0-------0----------2---1---5---|
------3---2-----2----5--------------7----0-------2----------3---2---7---|
----------------0----0--------------5------------3------------------7---|
--------------------------------------------------------------------5---|
EOD

# Let the strings sounds decay. 'play' without arguments is a measure
# of nothing.
$opus->play;
$opus->play;

# Finish and write the MIDI file.
# This is not really needed since it will be done implicitly when the
# opus object is destroyed.
# $opus->finish;

